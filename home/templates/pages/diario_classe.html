{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
    {% include 'partials/_head.html' %}
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet"/>

    <style>
        .table thead {
            background-color: #fab982;
            color: #212529;
        }

        .acoes-diario i {
            cursor: pointer;
            font-size: 1.2rem;
            margin: 0 6px;
            color: #495057;
        }

        .acoes-diario i:hover {
            color: #000;
            opacity: 0.85;
        }

        .estado-vazio {
            padding: 30px;
            text-align: center;
            color: #6c757d;
        }

        .estado-vazio i {
            font-size: 2rem;
            margin-bottom: 10px;
            display: block;
        }

        .btn-add-aula:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        select,
        select option {
            color: #212529 !important;
            background-color: #ffffff !important;
        }

        textarea.form-control {
            min-height: 90px;
        }

        /* ===== BOTÃO NOVA AULA ===== */
        .btn-warning {
            background-color: #fab982;
            border-color: #fab982;
            color: #212529;
        }

        .btn-warning:hover {
            background-color: #f5a65a;
            border-color: #f5a65a;
        }

        /* ===== TOAST GLOBAL ===== */
        .toast-global {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #212529;
            color: #fff;
            padding: 12px 18px;
            border-radius: 6px;
            opacity: 0;
            transition: opacity .3s ease;
            z-index: 9999;
            font-size: 14px;
        }

        .toast-global.show {
            opacity: 1;
        }

        .toast-success {
            background: #28a745;
        }

        .toast-error {
            background: #dc3545;
        }
        .nova-aula-highlight {
            background-color: rgba(250, 185, 130, 0.25);
            transition: background-color 1.5s ease;
}
    </style>
</head>

<body>

{% include 'partials/_nav.html' %}

<section class="content-wrapper" style="margin-top: 50px;">

    <div class="header-bar">
        Diário de Classe
    </div>

    <!-- FILTROS -->
    <div class="card p-3 mb-3">
        <div class="row align-items-end g-3">

            <div class="col-md-4">
                <label for="turma_id">Turma</label>
                <select id="turma_id" class="form-control">
                    <option value="">Selecione a turma</option>
                    {% for turma in turmas %}
                        <option value="{{ turma.id }}">{{ turma.nome }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="col-md-4">
                <label for="disciplina">Componente Curricular</label>
                <select id="disciplina" class="form-control">
                    <option value="">Selecione a disciplina</option>
                </select>
            </div>

            <div class="col-md-2">
                <label for="mes">Mês</label>
                <input type="month" id="mes" class="form-control">
                <small id="mes-pt" class="text-muted"></small>
            </div>

            <!-- AÇÕES -->
            <div class="col-md-2 text-end">
                <label class="d-block">&nbsp;</label>

                <div class="d-flex gap-2 justify-content-end">
                    <button
                        id="btnNovoDiario"
                        class="btn btn-warning btn-add-aula"
                        disabled
                    >
                        <i class="bi bi-plus-lg"></i> Aula
                    </button>

                    <button
                        id="btnPdfDiario"
                        class="btn btn-outline-secondary"
                        disabled
                        title="Gerar PDF do Diário de Classe"
                    >
                        <i class="bi bi-file-earmark-pdf"></i>
                    </button>
                </div>
            </div>

        </div>
    </div>

    <!-- TABELA -->
    <div class="card p-3">
        <table class="table table-bordered table-hover mb-0">
            <thead>
                <tr class="text-center align-middle">
                    <th style="width:60px">Nº</th>
                    <th style="width:220px">Dia / Horário</th>
                    <th style="width:160px">Data Ministrada</th>
                    <th>Resumo do Conteúdo</th>
                    <th style="width:150px">Ações</th>
                </tr>
            </thead>

            <tbody id="tabela-diario">
                <tr id="estado-vazio">
                    <td colspan="5">
                        <div class="estado-vazio">
                            <i class="bi bi-journal-text"></i>
                            <strong>Nenhum registro encontrado</strong>
                            <p class="mb-0">
                                Selecione a turma, disciplina e mês
                                ou clique em <b>“Nova Aula”</b>.
                            </p>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

</section>

<!-- TOAST GLOBAL -->
<div id="toast" class="toast-global"></div>

{% include 'partials/_footer.html' %}

<script src="{% static 'home/js/diario_classe.js' %}"></script>
</body>
</html>
